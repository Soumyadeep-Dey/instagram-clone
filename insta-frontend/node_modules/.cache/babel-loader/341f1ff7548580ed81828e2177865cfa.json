{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"E:\\\\Cognizant\\\\FULL PROJECT\\\\insta-frontend\\\\src\\\\Components\\\\StatusBar\\\\StatusBar.js\";\nimport React, { Component } from 'react';\nimport \"./StatusBar.css\";\nimport { Avatar } from '@material-ui/core';\nimport statusimg from \"../../images/pp1.png\";\nimport uploadimage from \"../../images/statusadd.png\";\nimport { storage, auth } from \"../firebase\";\n\nclass StatusBar extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getData = () => {\n      // let data=[\n      //     {\n      //         \"username\":\"anindya_bunny\",\n      //         \"imageURL\":\"https://darresne.com/img/female-avatar.png\"\n      //      },\n      //      {\n      //         \"username\":\"abcs\",\n      //         \"imageURL\":\"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTJYxr247w5ckIok4oLED58Lm7koT7pj4225A&usqp=CAU\"\n      //      },\n      //      {\n      //         \"username\":\"qwe\",\n      //         \"imageURL\":\"https://www.w3schools.com/w3css/img_avatar3.png\"\n      //      },\n      //      {\n      //         \"username\":\"jyjj\",\n      //         \"imageURL\":\"https://darresne.com/img/female-avatar.png\"\n      //      },\n      //      {\n      //         \"username\":\"jyjj\",\n      //         \"imageURL\":\"https://www.w3schools.com/w3css/img_avatar3.png\"\n      //      },\n      //      {\n      //         \"username\":\"jyjj\",\n      //         \"imageURL\":\"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSGonDgYzVXUcaKSWbvyH_ICVD23aI4zlRMJQ&usqp=CAU\"\n      //      },\n      //      {\n      //         \"username\":\"jyjj\",\n      //         \"imageURL\":\"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTJYxr247w5ckIok4oLED58Lm7koT7pj4225A&usqp=CAU\"\n      //      },\n      //      {\n      //         \"username\":\"jyjj\",\n      //         \"imageURL\":\"../../images/pp1.png\"\n      //      }\n      // ]\n      fetch('http://localhost:8080/status').then(response => response.json()).then(data => {\n        this.setState({\n          statusList: data\n        });\n      });\n    };\n\n    this.uploadStatus = event => {\n      let image = event.target.files[0];\n      const thisContext = this;\n      if (image == null || image == undefined) return;\n      var uploadTask = storage.ref(\"status\").child(image.name).put(image);\n      uploadTask.on(\"state_changed\", function (snapshot) {}, function (error) {}, function () {\n        uploadTask.snapshot.ref.getDownloadURL().then(function (downloadURL) {\n          console.log(downloadURL);\n          let payload = {\n            \"statusId\": Math.floor(Math.random() * 100000).toString(),\n            \"userId\": JSON.parse(localStorage.getItem(\"users\")).uid,\n            \"path\": downloadURL,\n            \"timeStamp\": new Date().getTime()\n          };\n          const requestOptions = {\n            method: \"POST\",\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(payload)\n          };\n          fetch(\"http://localhost:8080/status\", requestOptions).then(response => response.json()).then(data => {\n            thisContext.getData();\n          }).catch(error => {});\n        });\n      });\n    };\n\n    this.state = {\n      statusList: []\n    };\n  }\n\n  componentDidMount() {\n    this.getData();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"statusbar__container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"fileupload\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            for: \"file-upload-status\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              className: \"statusbar__upload\",\n              src: uploadimage,\n              width: \"55px\",\n              height: \"55px\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"file-upload-status\",\n            onChange: this.uploadStatus,\n            type: \"file\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 13\n        }, this), this.state.statusList.map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"status\",\n          children: [/*#__PURE__*/_jsxDEV(Avatar, {\n            className: \"statusbar__status\",\n            src: item.path\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"statusbar__text\",\n            children: item.userName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 25\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\nexport default StatusBar;","map":{"version":3,"sources":["E:/Cognizant/FULL PROJECT/insta-frontend/src/Components/StatusBar/StatusBar.js"],"names":["React","Component","Avatar","statusimg","uploadimage","storage","auth","StatusBar","constructor","props","getData","fetch","then","response","json","data","setState","statusList","uploadStatus","event","image","target","files","thisContext","undefined","uploadTask","ref","child","name","put","on","snapshot","error","getDownloadURL","downloadURL","console","log","payload","Math","floor","random","toString","JSON","parse","localStorage","getItem","uid","Date","getTime","requestOptions","method","headers","body","stringify","catch","state","componentDidMount","render","map","item","index","path","userName"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport \"./StatusBar.css\";\r\nimport { Avatar } from '@material-ui/core';\r\nimport statusimg from \"../../images/pp1.png\";\r\nimport uploadimage from \"../../images/statusadd.png\";\r\nimport {storage,auth} from \"../firebase\";\r\n\r\nclass StatusBar extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { \r\n            statusList: []\r\n         }\r\n    }\r\n    componentDidMount(){\r\n        this.getData();\r\n    }\r\n\r\n    getData=()=>{\r\n        // let data=[\r\n        //     {\r\n        //         \"username\":\"anindya_bunny\",\r\n        //         \"imageURL\":\"https://darresne.com/img/female-avatar.png\"\r\n        //      },\r\n        //      {\r\n        //         \"username\":\"abcs\",\r\n        //         \"imageURL\":\"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTJYxr247w5ckIok4oLED58Lm7koT7pj4225A&usqp=CAU\"\r\n        //      },\r\n        //      {\r\n        //         \"username\":\"qwe\",\r\n        //         \"imageURL\":\"https://www.w3schools.com/w3css/img_avatar3.png\"\r\n        //      },\r\n        //      {\r\n        //         \"username\":\"jyjj\",\r\n        //         \"imageURL\":\"https://darresne.com/img/female-avatar.png\"\r\n        //      },\r\n        //      {\r\n        //         \"username\":\"jyjj\",\r\n        //         \"imageURL\":\"https://www.w3schools.com/w3css/img_avatar3.png\"\r\n        //      },\r\n        //      {\r\n        //         \"username\":\"jyjj\",\r\n        //         \"imageURL\":\"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSGonDgYzVXUcaKSWbvyH_ICVD23aI4zlRMJQ&usqp=CAU\"\r\n        //      },\r\n        //      {\r\n        //         \"username\":\"jyjj\",\r\n        //         \"imageURL\":\"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTJYxr247w5ckIok4oLED58Lm7koT7pj4225A&usqp=CAU\"\r\n        //      },\r\n        //      {\r\n        //         \"username\":\"jyjj\",\r\n        //         \"imageURL\":\"../../images/pp1.png\"\r\n        //      }\r\n        // ]\r\n\r\n        fetch('http://localhost:8080/status')\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                this.setState({statusList: data});\r\n        });\r\n    }   \r\n\r\n    uploadStatus =(event)=>{\r\n        let image=event.target.files[0];\r\n        const thisContext=this;\r\n        if(image == null || image == undefined)\r\n            return;\r\n\r\n        var uploadTask = storage.ref(\"status\").child(image.name).put(image);\r\n        uploadTask.on(\r\n          \"state_changed\",\r\n          function (snapshot) {\r\n          },\r\n          function (error) {\r\n          },\r\n          function () {\r\n            uploadTask.snapshot.ref.getDownloadURL().then(function (downloadURL) {\r\n                console.log(downloadURL);\r\n\r\n                let payload = {\r\n                    \"statusId\": Math.floor(Math.random()*100000).toString(),\r\n                    \"userId\": JSON.parse(localStorage.getItem(\"users\")).uid,\r\n                    \"path\": downloadURL,\r\n                    \"timeStamp\": new Date().getTime()\r\n                }\r\n    \r\n                const requestOptions ={\r\n                    method: \"POST\",\r\n                    headers: { 'Content-Type': 'application/json' },\r\n                    body : JSON.stringify(payload),\r\n                }\r\n    \r\n                fetch(\"http://localhost:8080/status\",requestOptions)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    thisContext.getData();\r\n                })\r\n                .catch(error =>{\r\n    \r\n                })\r\n                \r\n            })\r\n            }\r\n        );\r\n    }\r\n\r\n    render() { \r\n        return ( \r\n        <div>\r\n            <div className=\"statusbar__container\">\r\n            <div className=\"fileupload\">\r\n                <label for=\"file-upload-status\" >\r\n                    <img className=\"statusbar__upload\" src={uploadimage} width=\"55px\" height=\"55px\" />\r\n                </label>\r\n                    <input id=\"file-upload-status\" onChange={this.uploadStatus} type=\"file\"/>\r\n            </div>\r\n                {\r\n                    this.state.statusList.map((item,index)=>(\r\n                        <div className=\"status\">\r\n                            <Avatar className=\"statusbar__status\" src={item.path} />\r\n                            <div className=\"statusbar__text\">{item.userName}</div>\r\n                        </div>\r\n                    ))\r\n                }\r\n            </div>\r\n        </div>\r\n         );\r\n    }\r\n}\r\n \r\nexport default StatusBar;"]},"metadata":{},"sourceType":"module"}